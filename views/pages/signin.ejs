<%- include('../partials/head'); %>
<body class="signin-section">
    <!-- <form action="/checkin" method="post">
        <input type="text" name="name" placeholder="Full Name" required>
        <input type="text" name="from" placeholder="From">
        <input type="email" name="email" placeholder="Email">
        <input type="text" name="phone" placeholder="Mobile Number" required>
        <button type="submit">Submit</button>
    </form> -->
    
    <div id="hiddenDiv">
    <!-- <div class="container d-flex align-items-center min-vh-100"> -->
        <div class="container d-flex align-items-center min-vh-100">
            <div class="row g-0 justify-content-center ">
                <div class="col-lg-4 offset-lg-1 mx-0 px-0">
                    <div id="title-container">
                    <img class="covid-image mb-5" src="images/Atrax-Logo.png">
                    <h2 class="fs-2 mb-3">Visitor's Form</h2>
                    <p class="fs-6">Please fill up the visitor form.</p>
                    </div>
                </div>
                <!-- FORMS -->
                <div class="col-lg-7 mx-0 px-0">
                    <div class="progress">
                    <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="50" class="progress-bar progress-bar-striped progress-bar-animated bg-danger" role="progressbar" style="width: 0%"></div>
                    </div>
                    <div id="qbox-container">
                    <form action="/checkin" method="post" name="form-wrapper" class="needs-validation" id="form-wrapper"  novalidate="">
                        <div id="steps-container">
                            <div class="step">
                                <h4>Visitor Contact Information:</h4>
                                <div class="mt-1">
                                <label class="form-label">Full Name: <span>*</span></label> 
                                <input class="form-control" id="name" name="name" type="text" placeholder="Enter the first and last name of visitor" required>
                                </div>
                                <div class="mt-2">
                                <label class="form-label">From:</label> 
                                <input class="form-control" id="from" name="from" type="text" placeholder="Visitor's company or organization">
                                </div>
                                <div class="mt-2">
                                <label class="form-label">Visitor's Email Address:</label> 
                                <input class="form-control" id="email" name="email" type="email" placeholder="Enter the visitor's email address">
                                </div>
                                <div class="mt-2">
                                <label class="form-label">Mobile Number: <span>*</span></label> 
                                <input class="form-control" id="phone" name="phone" type="tel" placeholder="Please enter your mobile number" required>
                                </div>
                            </div>
                            <div class="step">
                                <h4>Visit Options: Is the visitor visiting someone ?</h4>
                                <div class="row mt-2">
                                        <label class="form-label">Visiting Employee:</label>
                                        <input type="text" id="employeeSearch" placeholder="Search employees" list="employeeSuggestions">
                                        <datalist id="employeeSuggestions" name="employeeSuggestions"></datalist>


                                        <!-- <input type="text" id="employeeSearch" placeholder="Search employees">
                                        <div class="input-container">
                                            <select class="form-select form-select-lg mb-3" name="visiting_employee_id" id="employeeDropdown" aria-label="Select Visiting Employee">
                                                <option selected disabled>Select Visiting Employee</option>
                                            </select>
                                        </div> -->
                                        
                                        <!-- <div class="input-container">
                                            <select class="form-select form-select-lg mb-3" name="visiting_employee_id" aria-label="Select Visiting Employee">
                                                <option selected disabled>Select Visiting Employee</option>
                                                <% employees.forEach(employee => { %>
                                                    <option value="<%= employee.id %>"><%= employee.full_name %></option>
                                                <% }); %>
                                            </select>
                                        </div> -->
                                </div>
                            </div>
                            <div class="step">
                                <h4>Health and Safety: Evacuation Assitance Required ?</h4>
                                <div class="form-check ps-0 q-box">
                                <div class="q-box__question">
                                    <input class="form-check-input question__input" id="q_2_yes" name="q_2" type="radio" value="Yes"> 
                                    <label class="form-check-label question__label" for="q_2_yes">Yes</label>
                                </div>
                                <div class="q-box__question">
                                    <input checked class="form-check-input question__input" id="q_2_no" name="q_2" type="radio" value="No"> 
                                    <label class="form-check-label question__label" for="q_2_no">No</label>
                                </div>
                                </div>
                                <div class="row mt-2">
                                    <label class="form-label">if the visitor had to Evacuate this location would they need any assitance.</label>
                                </div>
                            </div>
                            <div class="step">
                                <div class="mt-1">
                                <div class="closing-text">
                                    <h4>Thanks for signing in.</h4>
                                    <p>Welcome to ATRAX Group</p>
                                    <p>Click on the submit button to continue.</p>
                                </div>
                                </div>
                            </div>
                            <div id="success">
                                <div class="mt-5">
                                <h4>Success! We'll get back to you ASAP!</h4>
                                <p>Welcome</p>
                                <a class="back-link" href="">Go back from the beginning âžœ</a>
                                </div>
                            </div>
                        </div>
                        <div id="q-box__buttons">
                            <button id="prev-btn" type="button">Previous</button> 
                            <button id="next-btn" type="button">Next</button> 
                            <button id="submit-btn" type="submit">Submit</button>
                        </div>
                    </form>
                </div>
                </div>
            </div>
        </div>
        <div id="preloader-wrapper" >
            <div id="preloader"></div>
            <div class="preloader-section section-left"></div>
            <div class="preloader-section section-right"></div>
        </div>
    </div>
    <!-- <script>
        function filterEmployees() {
            var input, filter, select, options, option, i, txtValue;
            input = document.getElementById("employeeSearch");
            filter = input.value.toUpperCase();
            select = document.getElementById("employeeDropdown");
            options = select.getElementsByTagName("option");
    
            for (i = 0; i < options.length; i++) {
                option = options[i];
                txtValue = option.textContent || option.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    option.style.display = "";
                } else {
                    option.style.display = "none";
                }
            }
        }
    </script> -->
<!-- 
    <script>
        const employeeSearchInput = document.getElementById("employeeSearch");
        const employeeDropdown = document.getElementById("employeeDropdown");
    
        employeeSearchInput.addEventListener("input", debounce(handleEmployeeSearch, 300));
    
        function debounce(func, delay) {
            let timeoutId;
            return function () {
                const context = this;
                const args = arguments;
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(context, args), delay);
            };
        }
    
        function handleEmployeeSearch() {
            const searchQuery = employeeSearchInput.value.trim();
    
            if (searchQuery.length === 0) {
                employeeDropdown.innerHTML = '<option selected disabled>Select Visiting Employee</option>';
                return;
            }
    
            // Make a request to your backend API to fetch autocomplete suggestions
            fetch(`/autocomplete?query=${searchQuery}`)
                .then(response => response.json())
                .then(data => {
                    // Update the dropdown with autocomplete suggestions
                    employeeDropdown.innerHTML = '<option selected disabled>Select Visiting Employee</option>';
                    data.forEach(employee => {
                        const option = document.createElement("option");
                        option.value = employee.id;
                        option.textContent = employee.name;
                        employeeDropdown.appendChild(option);
                    });
                })
                .catch(error => console.error("Error fetching autocomplete data:", error));
        }
    </script> -->
<script src="js/jquery.min.js"></script>
<script src="js/script.js"></script>
</body>
</html>