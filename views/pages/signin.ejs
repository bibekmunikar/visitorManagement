<%- include('../partials/head'); %>
<body class="signin-section">
    <!-- <form action="/checkin" method="post">
        <input type="text" name="name" placeholder="Full Name" required>
        <input type="text" name="from" placeholder="From">
        <input type="email" name="email" placeholder="Email">
        <input type="text" name="phone" placeholder="Mobile Number" required>
        <button type="submit">Submit</button>
    </form> -->
    
    <div id="hiddenDiv">
    <!-- <div class="container d-flex align-items-center min-vh-100"> -->
        <div class="container d-flex align-items-center min-vh-100">
            <div class="row g-0 justify-content-center ">
                <div class="col-lg-4 offset-lg-1 mx-0 px-0">
                    <div id="title-container">
                    <img class="covid-image mb-5" src="images/Atrax-Logo.png">
                    <h2 class="fs-2 mb-2">Visitor's Form</h2>
                    <p class="fs-8" style="font-size: 15px; text-align: center; color: #0093d0;">PLEASE COMPLETE THE</p>
                    <p class="fs-8" style="font-size: 15px; text-align: center; color: #0093d0;">FORM TO SIGN IN</p>
                    <a href="/" class="btn btn-warning rounded-pill w-50 p-3 mt-3 fs-6" type="button"> Go Back </a>
                    </div>
                </div>
                <!-- FORMS -->
                <div class="col-lg-8 mx-0 px-0">
                    <div class="progress">
                    <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="50" class="progress-bar progress-bar-striped progress-bar-animated bg-danger" role="progressbar" style="width: 0%"></div>
                    </div>
                    <div id="qbox-container">
                    <form action="/checkin" method="post" name="form-wrapper" class="needs-validation" id="form-wrapper"  novalidate="">
                        <div id="steps-container">
                            <div class="step">
                                <h4>Visitor's Contact Information:</h4>
                                <div class="mt-1">
                                <label class="form-label">Full Name: <span>*</span></label> 
                                <input class="form-control" id="name" name="name" type="text" placeholder="Please enter your Full Name" required>
                                </div>
                                <div class="mt-2">
                                <label class="form-label">From:</label> 
                                <input class="form-control" id="from" name="from" type="text" placeholder="Please enter your Company Name">
                                </div>
                                <div class="mt-2">
                                <label class="form-label">Email Address:</label> 
                                <input class="form-control" id="email" name="email" type="email" placeholder="Please enter your Email Address">
                                </div>
                                <div class="mt-2">
                                <label class="form-label">Mobile Number: <span>*</span></label> 
                                <input class="form-control" id="phone" name="phone" type="tel" placeholder="Please enter your Mobile Number" required>
                                </div>
                            </div>
                            <div class="step">
                                <h4>Visit Options:</h4>
                                <h4>Choose from the list to specify the person you'll visit today</h4>
                                <div class="mt-2">
                                    <label class="form-label">Visiting Employee:</label>
                                    <input type="text" id="employeeSearch" name="employeeSearch" placeholder="Search your host" list="employeeSuggestionsList">
                                    <datalist id="employeeSuggestionsList"></datalist>
                                    <input type="hidden" id="employee_id" name="employee_id">
                                </div>
                            </div>
                            <div class="step">
                                <h4>Conditions of Entry to Site: </h4>
                                
                                <div class="row mt-3">
                                    <label class="form-label" style="font-size: 20px; text-align: left; color: #0093d0;">Health and Safety Policy: </label>
                                    <label class="form-label">In accordance with Health and Safety at Work Act 2015 and its amendments
                                        , and our in-house Health and Safety Management programme, Visitors and Contractors must obey
                                        all reasonable instructions and signs whilst on site to ensure that thier actions create no hazards
                                        to people or property. Your site host will brief you on any specific health and safety requirements in the 
                                        areas you are visiting.
                                    </label>
                                    <label class="form-label" style="font-size: 20px; text-align: left; color: #0093d0;"> Fire and Emergency: </label>
                                    <label class="form-label">On hearing the alarm please leave the site immediately by the nearest Fire Exit.
                                       Your Host or any employee will escort you to a designated area. Please remain there until the all clear is given
                                    </label>
                                  <label class="form-label" style="font-size: 20px; text-align: left; color: #0093d0;">Smoking: </label>
                                    <label class="form-label">Smoking is prohibited on site except in designated area.
                                    </label>
                                    <label class="form-label" style="font-size: 20px; text-align: left; color: #0093d0;">Signature: </label>
                                    <label class="form-label">
                                    By Signing In you are acknowledging the acceptance and understanding of our conditions of entry.
                                    </label>
                                </div>
                                <div class="form-check ps-0 q-box">
                                    <div class="q-box__question">
                                        <input class="form-check-input question__input" id="hs_yes" name="q_2" type="radio" value="Yes">
                                        <label class="form-check-label question__label" for="hs_yes">Agree</label>
                                    </div>
                                    <div class="q-box__question">
                                        <input checked class="form-check-input question__input" id="hs_no" name="q_2" type="radio" value="No">
                                        <label class="form-check-label question__label" for="hs_no">Disagree</label>
                                </div>
                                </div>

                                
                            </div>
                            <div class="step">
                                <div class="mt-1">
                                <div class="closing-text text-center" style="font-size: 35px; color: #0093d0;">
                                    <h4>Thank you for Signing In</h4>
                                    <p style="font-size: 20px; text-align: center; color: #000;">Welcome to Atrax Group and Have a Pleasant Visit</p>
                                    <p style="font-size: 20px; text-align: left; color: #0093d0;">Click on the Submit button to continue</p>
                                </div>
                                </div>
                            </div>
                            <!-- <div id="success">
                                <div class="mt-5">
                                <h4>Success! We'll get back to you ASAP!</h4>
                                <p>Welcome</p>
                                <a class="back-link" href="">Go back from the beginning âžœ</a>
                                </div>
                            </div> -->
                        </div>
                        <div id="q-box__buttons">
                            <button id="prev-btn" type="button">Previous</button> 
                            <button id="next-btn" type="button">Next</button> 
                            <button id="submit-btn" type="submit">Submit</button>
                        </div>
                    </form>
                </div>
                </div>
            </div>
        </div>
        <div id="preloader-wrapper" >
            <div id="preloader"></div>
            <div class="preloader-section section-left"></div>
            <div class="preloader-section section-right"></div>
        </div>
    </div>
    <!-- <script>
        function filterEmployees() {
            var input, filter, select, options, option, i, txtValue;
            input = document.getElementById("employeeSearch");
            filter = input.value.toUpperCase();
            select = document.getElementById("employeeDropdown");
            options = select.getElementsByTagName("option");
    
            for (i = 0; i < options.length; i++) {
                option = options[i];
                txtValue = option.textContent || option.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    option.style.display = "";
                } else {
                    option.style.display = "none";
                }
            }
        }
    </script> -->
<!-- 
    <script>
        const employeeSearchInput = document.getElementById("employeeSearch");
        const employeeDropdown = document.getElementById("employeeDropdown");
    
        employeeSearchInput.addEventListener("input", debounce(handleEmployeeSearch, 300));
    
        function debounce(func, delay) {
            let timeoutId;
            return function () {
                const context = this;
                const args = arguments;
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(context, args), delay);
            };
        }
    
        function handleEmployeeSearch() {
            const searchQuery = employeeSearchInput.value.trim();
    
            if (searchQuery.length === 0) {
                employeeDropdown.innerHTML = '<option selected disabled>Select Visiting Employee</option>';
                return;
            }
    
            // Make a request to your backend API to fetch autocomplete suggestions
            fetch(`/autocomplete?query=${searchQuery}`)
                .then(response => response.json())
                .then(data => {
                    // Update the dropdown with autocomplete suggestions
                    employeeDropdown.innerHTML = '<option selected disabled>Select Visiting Employee</option>';
                    data.forEach(employee => {
                        const option = document.createElement("option");
                        option.value = employee.id;
                        option.textContent = employee.name;
                        employeeDropdown.appendChild(option);
                    });
                })
                .catch(error => console.error("Error fetching autocomplete data:", error));
        }
    </script> -->

    <!-- <script>
        getEmployeeEmailById(employee_id)
            .then(email => {
                if (email) {
                    sendEmailNotification(name, email);
                } else {
                    console.log('Employee with the provided ID not found');
                }
                console.log('Visitor data inserted successfully');
                res.redirect('/');
            })
            .catch(error => {
                console.error('Error:', error);
                return res.status(500).send(`Error: ${error.message}`);
            });
        
        </script> -->
        
<script src="js/jquery.min.js"></script>
<script src="js/script.js"></script>

</body>
</html>